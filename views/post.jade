extends layout

block title
  | - Welcome

block appID
  - var appID = 'post'

block topspacer
  - var featImg = doc.get('post.featureImage').views.fullscreen.url || ''
  - var pCategories = doc.getAll('post.categories')[0];
  
  .page.page-full-image(style='background-image: url("#{featImg}");')
  
    .social-container
      .container.post-container
        .post-social
          a(href='')
            img(src='/img/social-facebook.png', height='50', width='50')
          a(href='')
            img(src='/img/social-twitter.png', height='50', width='50')
          a(href='')
            img(src='/img/social-linkedin.png', height='50', width='50')

  .page.page-fixed-image

block app
  .page
    .container.post-container

      article
        .spacer-60
        
        h1=doc.getText('post.title')
        
        - var auths = doc.getAll('post.authors')[0]
        +printAuthor('postAll', auths)
        
        +printCategory('postAll', pCategories)
        
        .spacer-20

  #post.page
    .container

      article
        .post
          
          !=doc.getStructuredText('post.content').asHtml(ctx.linkResolver)

        .spacer-20

  .page
    .container.post-container

      article
        .meta
          .date=moment(doc.getDate('post.postDate')).format('DD/MM/YYYY')
          .reading-time=doc.getText('post.postReadingTime') + ' minuti'

        if similars && similars.length > 0
          .spacer-60
          .pure-g.related-ones
            each post in similars
              div(class='pure-u-1 pure-u-md-1-#{similars.length}')
                h3
                  a(href=ctx.linkResolver(post))=post.getText('post.title')
                - var authsRelated = post.getAll('post.authors')[0]
                h5 di 
                  if authsRelated && authsRelated.value.length > 0
                    each author, authIndex in authsRelated.value
                      +printAuthor('postMeta', author.getLink('Autore'))
                      if (authIndex !== (authsRelated.value.length - 1))
                        | , 
                  else
                    strong='GSO Company'


        .spacer-40


        //- !{doc.asHtml(ctx.linkResolver)}

